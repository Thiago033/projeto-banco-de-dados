<% layout('layouts/boilerplate') %>

  <% 
    //Return array with 3 random index from list of books
    function myRandomInts(lenghBooks) {
      const arr = [];

      while(arr.length < 3) {
        var candidateInt = Math.floor(Math.random() * lenghBooks);
        if(arr.indexOf(candidateInt) === -1) arr.push(candidateInt);
      }

      return arr;
    }
  %> 

  <%
    let array = myRandomInts(books.length);
  %>

  <h1 class="text-center">Featured Books!</h1>

  <div id="carouselExampleCaptions" class="carousel slide mt-5" data-bs-ride="false">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active"
        aria-current="true" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1"
        aria-label="Slide 2"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2"
        aria-label="Slide 3"></button>
    </div>
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="<%= books[array[0]].capa %>" class="d-block w-100" alt="...">
        <div class="carousel-caption d-none d-md-block background-gradient">
          <h5><a href="/livro/<%= books[array[0]].isbn %>" class="carrousel-link">
            <%= books[array[0]].titulo %></a>
          </h5>
          <p><%= books[array[0]].descricao %></p>
        </div>
      </div>
      <div class="carousel-item">
        <img src="<%= books[array[1]].capa %>" class="d-block w-100" alt="...">
        <div class="carousel-caption d-none d-md-block background-gradient">
          <h5><a href="/livro/<%= books[array[1]].isbn %>" class="carrousel-link">
            <%= books[array[1]].titulo %></a>
          </h5>
          <p><%= books[array[1]].descricao %></p>
        </div>
      </div>
      <div class="carousel-item">
        <img src="<%= books[array[2]].capa %>" class="d-block w-100" alt="...">
        <div class="carousel-caption d-none d-md-block background-gradient">
          <h5><a href="/livro/<%= books[array[2]].isbn %>" class="carrousel-link">
            <%= books[array[2]].titulo %></a>
          </h5>
          <p><%= books[array[2]].descricao %></p>
        </div>
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>